version: "3.3"
services:
  {{ env['CONTAINER'] }}:
    container_name: {{ env['CONTAINER'] }}
    image: {{ env['ECR_REGISTRY'] }}/{{ env['ECR_REPOSITORY'] }}:{{ env['IMAGE_TAG'] }} 
    ports:
      - {{ env['PORTS'] }}
    networks:
      - app-network
    log_driver: "awslogs"
    log_opt:
      awslogs-region: "{{ env['AWS_REGION'] }}"
      awslogs-group: "{{ env['CONTAINER'] }}-logs"
      awslogs-stream: "stream"
      awslogs-create-group: "true"

volumes:
  grafana-data:

networks:
  app-network:
    driver: bridge
